# NIKKE Team Planner

Esta herramienta web permite planificar equipos de cinco Nikkes utilizando la base de datos oficial publicada por [nikke.gg](https://nikke.gg). Incluye filtros, búsqueda, cálculo de estadísticas agregadas y un panel con todos los campos solicitados (buffs, condiciones, habilidades, etc.).

## Cómo usarlo

1. Abre `public/index.html` en tu navegador o sirve la carpeta `public` con tu servidor estático favorito.
2. El cliente intentará descargar los datos completos desde `https://nikke.gg/api/characters`. Si la red lo impide, se cargará un conjunto de datos de ejemplo (`public/data/sample-characters.json`) para demostrar la interfaz.
3. Usa la búsqueda y los filtros para localizar Nikkes y haz clic en "Añadir" para incorporarlos a tu equipo. El resumen del equipo muestra el total de Power, HP, ATK y DEF.
4. Selecciona cualquier Nikke de la lista para ver todos los campos solicitados y los detalles completos de cada habilidad.

## Actualizar los datos localmente

Si deseas guardar una copia local de la base de datos completa, ejecuta el script de ayuda (requiere Node.js 18+):

```bash
node scripts/fetch-characters.mjs
```

Esto descargará el JSON remoto y lo almacenará en `public/data/nikke-characters.json`. La aplicación detecta automáticamente este archivo y lo usa como fuente principal, evitando nuevas descargas.

### Uso sin conexión o con datos propios

Cuando la API de `nikke.gg` no responde, el script puede trabajar con archivos previamente descargados:

```bash
# 1) Guardar la lista de personajes y sus detalles
node scripts/fetch-characters.mjs \
  --from-file ./descargas/characters.html \
  --details-from ./descargas/detalles \
  --output public/data/nikke-characters.json
```

- `--from-file` acepta el HTML de <https://nikke.gg/characters> (el script extrae el bloque `__NEXT_DATA__`).
- `--details-from` apunta a una carpeta con páginas individuales (`rapi.html`, `alice.html`, etc.) o archivos JSON por _slug_.
- `--output` permite elegir el destino del archivo generado.
- `--concurrency` y `--delay` controlan cuántas descargas de detalle se realizan en paralelo y el intervalo entre ellas.

Al ejecutar el script, cada Nikke de la lista principal se empareja con su página de detalle para reunir estadísticas, habilidades, buffs y el resto de los campos solicitados.

> **Sugerencia:** si `nikke.gg` no está disponible desde tu red, puedes descargar el HTML de <https://nikke.gg/characters> manualmente y procesarlo sin conexión:
>
> ```bash
> node scripts/fetch-characters.mjs --from-file ./descargas/characters.html
> ```
>
> El script intentará primero la API pública (`https://nikke.gg/api/characters`) y, en caso de error, leerá el bloque `__NEXT_DATA__` del HTML para extraer la lista completa de Nikkes.

## Estructura del proyecto

```
public/
  app.js          # Lógica del cliente
  index.html      # Interfaz principal
  styles.css      # Estilos del planner
  data/
    sample-characters.json
    nikke-characters.json   # Generado por el script de importación (si existe)
scripts/
  fetch-characters.mjs (ver más abajo)
  fixtures/                 # HTMLs de ejemplo para pruebas sin red
```

## Script de importación

El script `scripts/fetch-characters.mjs` descarga todos los personajes, visita cada detalle para extraer estadísticas y habilidades y genera un JSON listo para usar en la aplicación. El archivo no se ejecuta automáticamente para evitar errores en entornos sin acceso a la red.

## Nota sobre la fuente de datos

La estructura de la API de nikke.gg puede cambiar con el tiempo. La aplicación contiene heurísticas para mapear los campos más importantes y mostrar toda la información disponible; si se añaden nuevas propiedades, se mostrarán automáticamente en los filtros y el buscador.
